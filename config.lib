# функции для работы с конфиг-файлом

echo_serial_info(){
	echo -e "${C_cyan}Название:    ${C_YELLOW}$1${C_NONE}"
	echo -e "${C_cyan}Кодовое имя: ${C_YELLOW}$2${C_NONE}"
	echo -e "${C_cyan}URL:         ${C_YELLOW}$3${C_NONE}"
	echo -e "${C_cyan}Папка:       ${C_YELLOW}$4${C_NONE}"
}

echo_config_info(){
	i=0
	if [ $SERNUM -eq -1 ]; then
		for gname in ${gname_lines[@]}; do
			echo_serial_info ${gname} ${name_lines[$i]} ${url_lines[$i]} ${path_lines[$i]}
			echo -e "${C_CYAN}---------------------------------------------${C_NONE}"
			i=$(($i+1))
		done
	else
		echo_serial_info ${gname_lines[$SERNUM]} ${name_lines[$SERNUM]} ${url_lines[$SERNUM]} ${path_lines[$SERNUM]}
	fi
}

read_config(){
	IFS=$'\n'
	index=0

	while read line ; do
		name_lines[$index]="`echo "$line" | awk '-F|' '{ print $1 }'`"
		gname_lines[$index]="`echo "$line" | awk '-F|' '{ print $2 }'`"
		url_lines[$index]="`echo "$line" | awk '-F|' '{ print $3 }'`"
		path_lines[$index]="`echo "$line" | awk '-F|' '{ print $4 }' | sed "s/%GNAME%/${gname_lines[$index]}/g"`"
		index=$(($index+1))
	done < $CONFIG_FILE
	return 0
}

# добавить сериал
# $1 - Полное название
# $2 - Кодовое имя
# $3 - Ссылка
# $4 - Путь к папке для хранения завершенных серий сериалов
config_add_serial(){
	echo "$2|$1|$3|$4/%GNAME%" >> $CONFIG_FILE
}

config_read_serial_info(){
	log_stages 1 "Полное название:"
	read info_fname
	log_stages 1 "Кодовое имя:"
	read info_fcode
	log_stages 1 "Ссылка:"
	read info_furl
	log_stages 1 "Путь к папке для хранения завершенных серий сериалов:"
	read info_fpath
}
